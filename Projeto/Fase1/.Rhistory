y_train_path <- "~/Documents/Mestrado/2oSemestre/MDLE/isel-mdle-2223/Projeto/Fase1/Influenza-Outbreak-Dataset/train/train_labels_1.csv"
x_train <- read_data(x_train_path)
x_train <- join(x_train, keywords)
y_train <- read_data(y_train_path)
y_train <- read_data(y_train_path)
y_train <- read_data(y_train_path)
y_train <- read_data(y_train_path)
y_train <- read_data(y_train_path)
y_train <- read_data(y_train_path)
source("~/Documents/Mestrado/2oSemestre/MDLE/isel-mdle-2223/Projeto/Fase1/Fase_1_Goncalo.R")
# Test data
x_test_path <- "~/Documents/Mestrado/2oSemestre/MDLE/isel-mdle-2223/Projeto/Fase1/Influenza-Outbreak-Dataset/test/test_data_1.csv"
y_test_path <- "~/Documents/Mestrado/2oSemestre/MDLE/isel-mdle-2223/Projeto/Fase1/Influenza-Outbreak-Dataset/test/test_labels_1.csv"
x_test <- read_data(x_test_path)
x_test <- join(x_test, keywords)
y_test <- read_data(y_test_path)
variances <- calculate_variance(x_train)
mm_diff <- calculate_mm_diff(x_train)
thresholds <- c(0.8, 0.9, 0.95)
calculate_n_features(variances, thresholds)
calculate_n_features(mm_diff, thresholds)
# PCA
pca_result <- calculate_pca(x_train)
n_pcs <- calculate_n_features(pca_result$sdev, thresholds)
reduced_x_train <- reduce_with_pca(x_train, pca_result, n_pcs[3]) # Index 3 corresponds to the highest threshold value
reduced_x_test <- reduce_with_pca(x_test, pca_result, n_pcs[3])
# Test with non-reduced dataset
cat("Confusion Matrix for model with non-reduced dataset:")
test_model(x_train, y_train, x_test, y_test)
# Test with reduced dataset
cat("Confusion Matrix for model with reduced dataset using PCA:")
test_model(reduced_x_train, y_train, reduced_x_test, y_test)
main <- function() {
# Flu keywords
keywords_path <- "~/Documents/Mestrado/2oSemestre/MDLE/isel-mdle-2223/Projeto/Fase1/Influenza-Outbreak-Dataset/flu_keywords.txt"
keywords <- read_keywords(keywords_path)
# Train data
x_train_path <- "~/Documents/Mestrado/2oSemestre/MDLE/isel-mdle-2223/Projeto/Fase1/Influenza-Outbreak-Dataset/train/train_data_1.csv"
y_train_path <- "~/Documents/Mestrado/2oSemestre/MDLE/isel-mdle-2223/Projeto/Fase1/Influenza-Outbreak-Dataset/train/train_labels_1.csv"
x_train <- read_data(x_train_path)
x_train <- join(x_train, keywords)
y_train <- read_data(y_train_path)
# Test data
x_test_path <- "~/Documents/Mestrado/2oSemestre/MDLE/isel-mdle-2223/Projeto/Fase1/Influenza-Outbreak-Dataset/test/test_data_1.csv"
y_test_path <- "~/Documents/Mestrado/2oSemestre/MDLE/isel-mdle-2223/Projeto/Fase1/Influenza-Outbreak-Dataset/test/test_labels_1.csv"
x_test <- read_data(x_test_path)
x_test <- join(x_test, keywords)
y_test <- read_data(y_test_path)
variances <- calculate_variance(x_train)
mm_diff <- calculate_mm_diff(x_train)
# TODO - fix plots
# barplot(variances, main = "Variance per Feature", xlab = "Features", ylab = "Variance")
# barplot(mm_diff, main = "Mean Median per Feature", xlab = "Features", ylab = "Mean Median")
thresholds <- c(0.8, 0.9, 0.95)
calculate_n_features(variances, thresholds)
calculate_n_features(mm_diff, thresholds)
# PCA
pca_result <- calculate_pca(x_train)
n_pcs <- calculate_n_features(pca_result$sdev, thresholds)
reduced_x_train <- reduce_with_pca(x_train, pca_result, n_pcs[3]) # Index 3 corresponds to the highest threshold value
reduced_x_test <- reduce_with_pca(x_test, pca_result, n_pcs[3])
# Test with non-reduced dataset
cat("Confusion Matrix for model with non-reduced dataset:")
test_model(x_train, y_train, x_test, y_test)
# Test with reduced dataset
cat("Confusion Matrix for model with reduced dataset using PCA:")
test_model(reduced_x_train, y_train, reduced_x_test, y_test)
}
main()
